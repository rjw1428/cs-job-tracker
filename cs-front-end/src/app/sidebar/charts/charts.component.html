<h1 style="display: inline; margin-right: 24px; font-weight: 500; padding: 10px">Charts</h1>
<!-- <div id="chartdiv" class="test chart" style="height: 500px"></div> -->

<mat-tab-group (selectedIndexChange)="onTabChanged($event)" [selectedIndex]="selectedTab$ | async">
  <mat-tab *ngFor="let chart of charts$ | async">
    <ng-template mat-tab-label>{{chart.name}}</ng-template>
    <ng-template matTabContent>
      <div style="display: flex; flex-direction: column; flex-grow: 1; align-items: strech;" class="wrapper">
        <div style="width: 75%">
          <app-filter 
            [shortcuts]="timeShortcuts$ | async"
            [selectedShortcut]="selectedShortcut"
            (dateRange)="onDateRangeSet($event)">
          </app-filter>
        </div>
        <div  [ngSwitch]="chart.chartType" style="flex-grow: 2;">
          <div *ngSwitchCase="'bar_vertical'" class="wrapper chart">
            <ngx-charts-bar-vertical 
              [results]="chart.dataSource"
              [xAxisLabel]="chart.xAxisLabel"
              [legendTitle]="chart.name"
              [yAxisLabel]="chart.yAxisLabel"
              [legend]="false"
              [showXAxisLabel]="true"
              [showYAxisLabel]="true"
              [xAxis]="true"
              [yAxis]="true"
              [gradient]="true">
            </ngx-charts-bar-vertical>
          </div>

          <div *ngSwitchCase="'bar_horizontal'" class="wrapper chart">
            <ngx-charts-bar-horizontal
              [results]="chart.dataSource"
              [xAxisLabel]="chart.xAxisLabel"
              [legendTitle]="chart.name"
              [yAxisLabel]="chart.yAxisLabel"
              [legend]="false"
              [showXAxisLabel]="true"
              [showYAxisLabel]="true"
              [xAxis]="true"
              [yAxis]="true"
              [gradient]="true">
            </ngx-charts-bar-horizontal>
          </div>

          <div *ngSwitchCase="'single_line'" class="wrapper chart">
            <ngx-charts-line-chart
              [results]="chart.dataSource"
              [xAxisLabel]="chart.xAxisLabel"
              [legendTitle]="chart.name"
              [yAxisLabel]="chart.yAxisLabel"
              [legend]="true"
              [showXAxisLabel]="true"
              [showYAxisLabel]="true"
              [xAxis]="true"
              [yAxis]="true"
              [gradient]="true">
            </ngx-charts-line-chart>
          </div>

          <div *ngSwitchCase="'pie'" class="wrapper chart">
            <ngx-charts-pie-chart
              [results]="chart.dataSource"
              [legendTitle]="chart.name"
              [legend]="true"
              [labels]="true"
              [gradient]="true">
            </ngx-charts-pie-chart>
          </div>

          <div *ngSwitchCase="'pie_advanced'" class="wrapper chart">
            <ngx-charts-advanced-pie-chart
              [results]="chart.dataSource"
              [gradient]="true">
            </ngx-charts-advanced-pie-chart>
          </div>

          <div *ngSwitchCase="'combo'" class="wrapper2">
            <combo-chart-component
              [scheme]="comboBarScheme"
              [colorSchemeLine]="lineChartScheme"
              [results]="chart['dataSource1']"
              [legendTitle]="chart.name"
              [lineChart]="chart['dataSource2']"
              [xAxisLabel]="xAxisLabel"
              [yAxisLabel]="yAxisLabel"
              [yAxisLabelRight]="yAxisLabelRight"
              [legendPosition]="legendPosition"
              [showGridLines]="true"
              [showXAxisLabel]="true"
              [showYAxisLabel]="true"
              [showRightYAxisLabel]="true"
              [gradient]="true"
              [xAxis]="true"
              [yAxis]="true"
              [legend]="true"
              [animations]="true">
            </combo-chart-component>
          </div>

          <div *ngSwitchCase="'gantt'" class="wrapper">
            <div style="display: flex; flex-direction: column; height: 100%; box-sizing:border-box">
                <div id="chartdiv" style="flex-grow: 2"></div>
            </div>
          </div> 

        </div>
      </div>
    </ng-template>
  </mat-tab>
</mat-tab-group>
<loading-wrapper></loading-wrapper>

